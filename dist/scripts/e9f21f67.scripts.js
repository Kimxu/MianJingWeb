"use strict";angular.module("NewMJApp",["ngCookies","ngResource","ngSanitize","ui.router"]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider",function(a,b,c,d){b.otherwise("/"),d.interceptors.push(["$Qqloginservice",function(a){return{request:function(b){return"POST"==b.method&&(b.params.openId=a.data.openId),b}}}]),a.state("index",{url:"/",views:{header:{templateUrl:"views/header.html",controller:"HeaderCtrl"},content:{templateUrl:"views/content.html",controller:"MainCtrl"},footer:{templateUrl:"views/footer.html",controller:"FooterCtrl"}}}).state("index.login",{url:"login",views:{"content@":{templateUrl:"views/login.html",controller:"LoginCtrl"}}}).state("index.counselor",{url:"counselor",views:{"content@":{templateUrl:"views/counselor.html",controller:"CounselorCtrl"}}}).state("index.forHelp",{url:"forHelp",views:{"content@":{templateUrl:"views/forHelp.html",controller:"ForhelpCtrl"}}}).state("index.eliteInto",{url:"eliteInto",resolve:{user:["$Qqloginservice","$state","$q","$timeout",function(a,b,c,d){var e=c.defer();return a.isLogin?e.resolve():(d(function(){b.go("index.login")},0),e.reject()),e.promise}]},views:{"content@":{templateUrl:"views/eliteInto.html",controller:"EliteintoCtrl"}}}).state("index.result",{url:"result/:message/:code",views:{"content@":{templateUrl:"views/result.html",controller:"ResultCtrl"},"footer@":{templateUrl:"views/footer-fixed.html",controller:"FooterCtrl"}}}).state("index.process",{url:"process",views:{"content@":{templateUrl:"views/process.html",controller:"ProcessCtrl"}}}).state("index.agreement",{url:"agreement",views:{"content@":{templateUrl:"views/agreement.html",controller:"AgreementCtrl"}}}).state("index.question",{url:"question",views:{"content@":{templateUrl:"views/question.html",controller:"QuestionCtrl"}}})}]),angular.module("NewMJApp").controller("MainCtrl",["$scope","$resource",function(a,b){}]),angular.module("NewMJApp").controller("HeaderCtrl",["$scope","$Qqloginservice",function(a,b){a.service=b,a.$watch("service",function(b,c,d){a.isLogin=b.isLogin,a.userName=b.data.userName},!0),a.userName=b.data.userName,a.isLogin=b.isLogin,a.signOut=function(){b.signOut(),a.isLogin=!1,QC.Login.signOut()}}]),angular.module("NewMJApp").controller("FooterCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("NewMJApp").service("httpService",["$resource","$Qqloginservice",function(a,b){var c="http://www.9678offer.com";return a("",{},{findElite:{method:"POST",url:c+"/elite/findAll/",params:{pageNow:"@pageNow",pageSize:"@pageSize"}},login:{method:"POST",url:c+"/account/login/",params:{openId:"@openId",accountId:"@accountId",userName:"@userName",headPortrait:"@headPortrait",loginType:"@loginType"}},eliteInto:{method:"POST",url:c+"/elite/save",params:{realName:"@realName",phoneNumber:"@phoneNumber",email:"@email",paynumber:"@paynumber",company:"@company",position:"@position",workYears:"@workYears",payroll:"@payroll",workLocation:"@workLocation",profession:"@profession",workExperience:"@workExperience"}}})}]),angular.module("NewMJApp").factory("$Qqloginservice",function a(){var a={};return a.data={openId:localStorage["MianJing.openId"]?localStorage["MianJing.openId"]:"",accessToken:localStorage["MianJing.accessToken"]?localStorage["MianJing.accessToken"]:"",userName:localStorage["MianJing.userName"]?localStorage["MianJing.userName"]:"",headPortrait:localStorage["MianJing.headPortrait"]?localStorage["MianJing.headPortrait"]:""},a.isLogin=!1,""!=a.data.openId&&(a.isLogin=!0),a.save=function(a,b){localStorage["MianJing.openId"]=a.openId,localStorage["MianJing.accessToken"]=a.accessToken,localStorage["MianJing.userName"]=a.userName,localStorage["MianJing.headPortrait"]=a.headPortrait,b()},a.signOut=function(){localStorage["MianJing.openId"]="",localStorage["MianJing.accessToken"]="",localStorage["MianJing.userName"]="",localStorage["MianJing.headPortrait"]="",a.isLogin=!1},a}),angular.module("NewMJApp").controller("LoginCtrl",["$scope","$Qqloginservice","httpService",function(a,b,c){function d(){if(""!=b.data.openId)b.isLogin=!0,e();else{var a={};QC.api("get_user_info",a).success(function(a){QC.Login.check()&&QC.Login.getMe(function(d,f){b.data={openId:d,accessToken:f,userName:a.data.nickname,password:"null",headPortrait:a.data.figureurl},b.save(b.data,function(){b.isLogin=!0,e()}),c.login({openId:b.data.openId,accountId:b.data.openId,userName:b.data.userName,headPortrait:b.data.headPortrait,loginType:0})})}).error(function(a){alert("获取用户信息失败！"),b.isLogin=!1}).complete(function(a){})}}function e(){a.figureurl=b.data.headPortrait,a.nickname=b.data.userName,a.$apply()}a.service=b,a.$watch("service",function(b,c,d){a.isLogin=b.isLogin,console.log(b)},!0),QC.Login({btnId:"qqLoginBtn",scope:"all",size:"A_XL"},function(a,b){d()},function(a){}),a.signOut=function(){b.signOut(),QC.Login.signOut()}}]),angular.module("NewMJApp").controller("CounselorCtrl",["$scope",function(a){}]),angular.module("NewMJApp").controller("TagInfoCtrl",["$scope","httpService",function(a,b){function c(c){1>c||c>d||(a.currentPage=c,b.findElite({pageNow:c,pageSize:10,sort:a.sort},function(b){a.totalPages=function(){return d=b.totalPages,new Array(b.totalPages)},a.elites=b.content}))}a.currentPage=1;var d=1;c(a.currentPage),a.toPage=function(a){c(a)},a.goNext=function(){c(a.currentPage+1)},a.goPre=function(){c(a.currentPage-1)}}]),angular.module("NewMJApp").directive("tagInfo",function(){return{templateUrl:"../../views/tag-info.html",restrict:"EC",scope:{sort:"@"},controller:"TagInfoCtrl"}}),angular.module("NewMJApp").controller("ForhelpCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("NewMJApp").controller("EliteintoCtrl",["$scope","$state","httpService",function(a,b,c){a.dropdownMenu1="选择咨询时间",a.selectTime=function(b){a.dropdownMenu1=b},a.submitForm=function(){return"undefined"==typeof a.company?(alert("填写公司名称"),!1):"undefined"==typeof a.job?(alert("填写工作职位"),!1):"undefined"==typeof a.company?(alert("填写公司名称"),!1):"undefined"==typeof a.workYears?(alert("填写工作年限"),!1):"undefined"==typeof a.hPrice?(alert("填写时薪"),!1):"undefined"==typeof a.email?(alert("请填写正确的邮箱地址"),!1):"undefined"==typeof a.dropdownMenu1?(alert("选择工作时间"),!1):"undefined"==typeof a.role?(alert("填写工作角色"),!1):"undefined"==typeof a.workLocation?(alert("填写工作地点"),!1):"undefined"==typeof a.experience?(alert("填写工作经历"),!1):void c.eliteInto({realName:a.username,phoneNumber:a.phone,email:a.email,paynumber:a.alipay,company:a.company,position:a.job,workYears:a.workYears,payroll:a.hPrice,workLocation:a.workLocation,profession:a.role,workExperience:a.experience},function(a){b.go("index.result",{message:a.message,code:a.code})})}}]),angular.module("NewMJApp").controller("ResultCtrl",["$scope","$stateParams","$timeout","$state",function(a,b,c,d){a.result=b.message,c(function(){d.go("index")},4e3)}]),angular.module("NewMJApp").controller("ProcessCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("NewMJApp").controller("AgreementCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("NewMJApp").controller("QuestionCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]);